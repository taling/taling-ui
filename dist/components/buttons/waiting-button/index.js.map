{"version":3,"sources":["../../../../src/components/buttons/waiting-button/index.tsx","../../../../src/util/tailwind-util/class-names/index.ts"],"sourcesContent":["import { classNames } from \"@taling-ui/util/tailwind-util/class-names\"; // classNames 유틸 사용 가정\nimport { cloneElement, useCallback, useEffect, useState } from \"react\";\n\nexport default function WaitingButton({\n  render: { normal, waiting, failed },\n  passData,\n  className,\n  onClick,\n}: {\n  render: {\n    normal: React.ReactNode;\n    waiting: React.ReactNode;\n    failed?: React.ReactNode;\n  };\n  passData?: any;\n  className?: string;\n  onClick: (passData?: any) => Promise<boolean>;\n}) {\n  const [currentRender, setCurrentRender] = useState<React.ReactNode>(normal);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const _internalOnClick = useCallback(async () => {\n    if (isLoading) return;\n    setIsLoading(true);\n    setCurrentRender(waiting);\n    const result = await onClick(passData);\n    setIsLoading(false);\n    setCurrentRender(result ? normal : failed || normal);\n  }, [failed, isLoading, normal, onClick, passData, waiting]);\n\n  const updateNormalButton = useCallback(() => {\n    if (!isLoading) {\n      setCurrentRender(normal);\n    }\n  }, [isLoading, normal]);\n\n  useEffect(() => {\n    updateNormalButton();\n  }, [normal, updateNormalButton]);\n\n  const element = currentRender as React.ReactElement;\n\n  return cloneElement(element, {\n    onClick: _internalOnClick,\n    className: classNames(element.props.className || \"\", className || \"\"),\n  });\n}\n","export function classNames(...classes: (string | undefined)[]) {\n  return classes.filter(Boolean).join(\" \");\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,SAAS,cAAc,SAAiC;AAC7D,SAAO,QAAQ,OAAO,OAAO,EAAE,KAAK,GAAG;AACzC;;;ADDA,mBAA+D;AAEhD,SAAR,cAA+B;AAAA,EACpC,QAAQ,EAAE,QAAQ,SAAS,OAAO;AAAA,EAClC;AAAA,EACA;AAAA,EACA;AACF,GASG;AACD,QAAM,CAAC,eAAe,gBAAgB,QAAI,uBAA0B,MAAM;AAC1E,QAAM,CAAC,WAAW,YAAY,QAAI,uBAAS,KAAK;AAEhD,QAAM,uBAAmB,0BAAY,YAAY;AAC/C,QAAI,UAAW;AACf,iBAAa,IAAI;AACjB,qBAAiB,OAAO;AACxB,UAAM,SAAS,MAAM,QAAQ,QAAQ;AACrC,iBAAa,KAAK;AAClB,qBAAiB,SAAS,SAAS,UAAU,MAAM;AAAA,EACrD,GAAG,CAAC,QAAQ,WAAW,QAAQ,SAAS,UAAU,OAAO,CAAC;AAE1D,QAAM,yBAAqB,0BAAY,MAAM;AAC3C,QAAI,CAAC,WAAW;AACd,uBAAiB,MAAM;AAAA,IACzB;AAAA,EACF,GAAG,CAAC,WAAW,MAAM,CAAC;AAEtB,8BAAU,MAAM;AACd,uBAAmB;AAAA,EACrB,GAAG,CAAC,QAAQ,kBAAkB,CAAC;AAE/B,QAAM,UAAU;AAEhB,aAAO,2BAAa,SAAS;AAAA,IAC3B,SAAS;AAAA,IACT,WAAW,WAAW,QAAQ,MAAM,aAAa,IAAI,aAAa,EAAE;AAAA,EACtE,CAAC;AACH;","names":[]}