{"version":3,"sources":["../../../src/components/image-fallback/index.tsx"],"sourcesContent":["/* eslint-disable @next/next/no-img-element */\nimport Image from \"next/image\";\nimport { useState } from \"react\";\n\ninterface ImageFallbackProps {\n  src: string;\n  alt: string;\n  className?: string;\n  fallback?: React.ReactNode | string;\n  loading?: \"eager\" | \"lazy\" | undefined;\n  nextImageOption?: {\n    width?: number;\n    height?: number;\n    fill?: boolean;\n  };\n  useDefaultImg?: boolean;\n  onClick?: () => void\n}\n/**\n * 이미지 로드에 실패하면 fallback 컴포넌트를 표시합니다.\n * @param param0\n * @returns\n */\nexport default function ImageFallback({\n  src,\n  alt,\n  className = \"\",\n  fallback = <div className=\"h-full bg-taling-gray-300 blur-sm \"></div>\n  ,\n  loading = \"lazy\",\n  nextImageOption,\n  useDefaultImg,\n  onClick\n}:ImageFallbackProps) {\n  const [showFallback, setShowFallback] = useState<boolean>(false);\n\n  if (showFallback || !src) {\n    if (useDefaultImg) {\n      const defaultSrc =\n        \"//img.taling.me/Content/Images/placeholders/profile-default.jpg\";\n      return nextImageOption ? (\n        <Image\n          src={defaultSrc}\n          alt={alt}\n          className={className}\n          width={nextImageOption.width}\n          height={nextImageOption.height}\n          fill={nextImageOption.fill}\n          loading={loading}\n          onClick={onClick}\n        />\n      ) : (\n        <img\n          src={defaultSrc}\n          alt={alt}\n          className={className}\n          loading={loading}\n          onClick={onClick}\n        />\n      );\n    }\n    return <div className={className}>{fallback}</div>;\n  }\n\n  const protocolCheck = (src: string) => {\n    if (src.startsWith(\"//\")) {\n      return \"https:\" + src;\n    }\n    if (!src.startsWith(\"http://\") && !src.startsWith(\"https://\")) {\n      return \"https://\" + src;\n    }\n    return src;\n  };\n\n  const domainCheck = (src: string) => {\n    if (!src) return false;\n    if (src.includes(\"taling.me\")) {\n      return true;\n    }\n  };\n\n  return nextImageOption && domainCheck(src) ? (\n    <Image\n      src={protocolCheck(src)}\n      alt={alt}\n      className={className}\n      width={nextImageOption.width}\n      height={nextImageOption.height}\n      fill={nextImageOption.fill}\n      placeholder=\"blur\"\n      blurDataURL=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mO8Ww8AAj8BXkQ+xPEAAAAASUVORK5CYII=\"\n      loading={loading}\n      onError={() => {\n        setShowFallback(true);\n      }}\n      onClick={onClick}\n    />\n  ) : (\n    <img\n      src={src}\n      alt={alt}\n      className={className}\n      loading={loading}\n      onError={() => {\n        setShowFallback(true);\n      }}\n      onClick={onClick}\n    />\n  );\n}\n"],"mappings":";AACA,OAAO,WAAW;AAClB,SAAS,gBAAgB;AAqBV,SAAR,cAA+B;AAAA,EACpC;AAAA,EACA;AAAA,EACA,YAAY;AAAA,EACZ,WAAW,oCAAC,SAAI,WAAU,sCAAqC;AAAA,EAE/D,UAAU;AAAA,EACV;AAAA,EACA;AAAA,EACA;AACF,GAAsB;AACpB,QAAM,CAAC,cAAc,eAAe,IAAI,SAAkB,KAAK;AAE/D,MAAI,gBAAgB,CAAC,KAAK;AACxB,QAAI,eAAe;AACjB,YAAM,aACJ;AACF,aAAO,kBACL;AAAA,QAAC;AAAA;AAAA,UACC,KAAK;AAAA,UACL;AAAA,UACA;AAAA,UACA,OAAO,gBAAgB;AAAA,UACvB,QAAQ,gBAAgB;AAAA,UACxB,MAAM,gBAAgB;AAAA,UACtB;AAAA,UACA;AAAA;AAAA,MACF,IAEA;AAAA,QAAC;AAAA;AAAA,UACC,KAAK;AAAA,UACL;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA;AAAA,MACF;AAAA,IAEJ;AACA,WAAO,oCAAC,SAAI,aAAuB,QAAS;AAAA,EAC9C;AAEA,QAAM,gBAAgB,CAACA,SAAgB;AACrC,QAAIA,KAAI,WAAW,IAAI,GAAG;AACxB,aAAO,WAAWA;AAAA,IACpB;AACA,QAAI,CAACA,KAAI,WAAW,SAAS,KAAK,CAACA,KAAI,WAAW,UAAU,GAAG;AAC7D,aAAO,aAAaA;AAAA,IACtB;AACA,WAAOA;AAAA,EACT;AAEA,QAAM,cAAc,CAACA,SAAgB;AACnC,QAAI,CAACA,KAAK,QAAO;AACjB,QAAIA,KAAI,SAAS,WAAW,GAAG;AAC7B,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO,mBAAmB,YAAY,GAAG,IACvC;AAAA,IAAC;AAAA;AAAA,MACC,KAAK,cAAc,GAAG;AAAA,MACtB;AAAA,MACA;AAAA,MACA,OAAO,gBAAgB;AAAA,MACvB,QAAQ,gBAAgB;AAAA,MACxB,MAAM,gBAAgB;AAAA,MACtB,aAAY;AAAA,MACZ,aAAY;AAAA,MACZ;AAAA,MACA,SAAS,MAAM;AACb,wBAAgB,IAAI;AAAA,MACtB;AAAA,MACA;AAAA;AAAA,EACF,IAEA;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,SAAS,MAAM;AACb,wBAAgB,IAAI;AAAA,MACtB;AAAA,MACA;AAAA;AAAA,EACF;AAEJ;","names":["src"]}